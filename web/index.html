<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="description" content="">
    <meta name="author" content="costa@tsaousis.gr">
 
 	<title>NetData</title>

	<!-- Google AJAX API -->
	<script type="text/javascript" src="https://www.google.com/jsapi"></script>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

	<!-- Bootstrap -->
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
	<!-- <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css"> -->
	<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
	<link href="/file/theme.css" rel="stylesheet">

	<!-- NetData -->
	<script type="text/javascript" src="/file/netdata.js"></script>
	<script type="text/javascript" src="/file/jquery.visible.js"></script>
	<script type="text/javascript">
	
	// Set a callback to run when the Google Visualization API is loaded.
	google.setOnLoadCallback(initCharts);
	
	var TARGET_THUMB_GRAPH_WIDTH = 500; // chart width will range from 0.5 to 1.5 of that
	var MINIMUM_THUMB_GRAPH_WIDTH = 400; // chart will generally try to be wider than that
	var TARGET_THUMB_GRAPH_HEIGHT = 220;
	var MAINCHART_MAX_TIME_TO_SHOW = 1200;
	var THUMBS_MAX_TIME_TO_SHOW = 600;

	var MODE_THUMBS = 1;
	var MODE_MAIN = 2;
	var MODE_GROUP_THUMBS = 3;
	var mode; // one of the MODE_* values

	var mycharts = new Array();
	var mainchart;

	// html for the main menu
	var mainmenu = "";


	// ------------------------------------------------------------------------
	// common HTML generation

	function chartIsLoadingHTML(width, height) { return "<table><tr><td align=\"center\" width=\"" + width + "\" height=\"" + height + "\" style=\"vertical-align:middle\"><h4><span class=\"glyphicon glyphicon-refresh\"></span><br/><br/>loading chart<br/><br/><span class=\"label label-default\">Please wait...</span></h4></td></tr></table>"; }

	function showChartIsLoading(id, width, height) { document.getElementById(id).innerHTML = chartIsLoadingHTML(width, height); }

	function thumbChartActions(i, c, nogroup) {
		var name = c.name;
		if(!nogroup) name = c.group_tag;

		var refinfo = "the chart is drawing ";
		if(c.group == 1) refinfo += "every single point collected.";
		else refinfo += ((c.group_method == "average")?"the average":"the max") + " value for every " + (c.group * c.update_every) + " seconds of data";

		var html = "<div class=\"btn-group btn-group\" data-toggle=\"tooltip\" title=\"" + refinfo + "\">"
		+		"<button type=\"button\" class=\"btn btn-default\" onclick=\"javascript: return;\"><span class=\"glyphicon glyphicon-info-sign\"></span></button>"
		+	"</div>"
		+	"<div class=\"btn-group btn-group\"><button type=\"button\" class=\"btn btn-default disabled\"><small>&nbsp;&nbsp; " + name + "</small></button>";

		if(!nogroup) {
			var ingroup = 0;
			var ingroup_detail = 0;

			$.each(mycharts, function(i, d) {
				if(d.group_tag == c.group_tag) {
					ingroup++;
					if(d.isdetail) ingroup_detail++;
				}
			});

			var hidden = "";
			if(ingroup_detail) hidden = ", including " + ingroup_detail + " charts not shown now";

			html += "<button type=\"button\" data-toggle=\"tooltip\" title=\"Show all " + ingroup + " charts in group '" + c.group_tag + "'" + hidden + "\" class=\"btn btn-default\" onclick=\"initGroupGraphs('" + c.group_tag +"');\"><span class=\"glyphicon glyphicon-th-large\"></span></button>";
		}

		html += "<button type=\"button\" data-toggle=\"tooltip\" title=\"show chart '" + c.name + "' in fullscreen\" class=\"btn btn-default\" onclick=\"initMainChartIndex(" + i +");\"><span class=\"glyphicon glyphicon-resize-full\"></span></button>"
		+		"<button type=\"button\" data-toggle=\"tooltip\" title=\"set options for chart '" + c.name + "'\" class=\"btn btn-default disabled\" onclick=\"alert('Not implemented yet!');\"><span class=\"glyphicon glyphicon-cog\"></span></button>"
		+		"<button type=\"button\" data-toggle=\"tooltip\" title=\"ignore chart '" + c.name + "'\" class=\"btn btn-default\" onclick=\"disableChart(" + i + ");\"><span class=\"glyphicon glyphicon-trash\"></span></button>"
		+	"</div>";

		return html;
	}

	function disableChart(i) {
		var chart = null;

		var count = 0;
		if(group_charts) $.each(group_charts, function(i, c) {
			if(c.enabled) count++;
		});
		if(count <= 1) {
			alert('Cannot close the last chart shown.');
			return;
		}

		if(group_charts) 
			chart = group_charts[i];
		else
			chart = mycharts[i];

		if(chart) {
			chart.enabled = false;
			if(chart.chart) chart.chart.clearChart();
			chart.chart = null;
		}
		var div = document.getElementById(chart.div);
		if(div) div.innerHTML = "";

		div = document.getElementById(chart.div + "_parent");
		if(div) div.innerHTML = "";

		resizeCharts();
	}

	function chartssort(a, b) {
		if(a.userpriority < b.userpriority) return -1;
		return 1;
	}


	// ------------------------------------------------------------------------
	// MAINGRAPH = fullscreen view of 1 graph

	// copy the chart c to mainchart
	// switch to main graphs screen
	function initMainChart(c) {
		if(mainchart && mainchart.chart) {
			mainchart.chart.clearChart();
			mainchart.chart = null;
		}

		mainchart = $.extend(true, {}, c);

		mainchart.chart = null;
		mainchart.chartOptions.width = screenWidth();
		mainchart.chartOptions.height = $(window).height() - 150;
		if(mainchart.chartOptions.height < 300) mainchart.chartOptions.height = 300;
		
		mainchart.group = 2;
		mainchart.div = 'maingraph';
		mainchart.last_updated = 0;

		if(mainchart.chartOptions.isStacked) mainchart.group = 5;
		//mainchart.chartOptions.titlePosition = 'none';
		mainchart.chartOptions.explorer = null;

		// initialize the div
		showChartIsLoading(mainchart.div, mainchart.chartOptions.width, mainchart.chartOptions.height);

		// set the radio buttons
		setMainChartGroupMethod(mainchart.group_method, 'no-refresh');
		setMainChartMax('normal');

		$('#group' + mainchart.group).trigger('click');

		switchToMainGraph();
	}

	function initMainChartIndex(i) {
		if(mode == MODE_GROUP_THUMBS) 
			initMainChart(group_charts[i]);
		else if(mode == MODE_THUMBS)
			initMainChart(mycharts[i]);
	}

	var last_main_chart_max='normal';
	function setMainChartMax(m) {
		if(!mainchart || mode != MODE_MAIN) return;

		if(m == 'toggle') {
			if(last_main_chart_max == 'maximized') m = 'normal';
			else m = 'maximized';
		}

		if(m == "maximized") {
			mainchart.chartOptions.theme = 'maximized';
			//mainchart.chartOptions.axisTitlesPosition = 'in';
			//mainchart.chartOptions.legend = {position: 'none'};
			//mainchart.chartOptions.hAxis.title = null;
			mainchart.chartOptions.hAxis.viewWindowMode = 'maximized';
			mainchart.chartOptions.vAxis.viewWindowMode = 'maximized';
		}
		else {
			mainchart.chartOptions.theme = null;
			mainchart.chartOptions.hAxis.viewWindowMode = null;
			mainchart.chartOptions.vAxis.viewWindowMode = null;
		}
		$('.mainchart_max_button').button(m);
		last_main_chart_max = m;
		mainchart.last_updated = 0;
	}

	function setMainChartGroup(g) {
		if(!mainchart || mode != MODE_MAIN) return;

		mainchart.group = g;
		mainchart.last_updated = 0;
		playGraphs();
	}

	var last_main_chart_avg = null;
	function setMainChartGroupMethod(g, norefresh) {
		if(!mainchart || mode != MODE_MAIN) return;

		if(g == 'toggle') {
			if(last_main_chart_avg == 'max') g = 'average';
			else g = 'max';
		}

		mainchart.group_method = g;

		$('.mainchart_avg_button').button(g);

		if(!norefresh) {
			mainchart.last_updated = 0;
			playGraphs();
		}

		last_main_chart_avg = g;
	}

	function setMainChartPlay(p) {
		if(!mainchart) return;

		if(p == 'toggle') {
			if(stop_refreshing) p = 'play';
			else p = 'pause';
		}

		if(p == 'play') {
			mainchart.chartOptions.explorer = null;
			playGraphs();
		}
		else {
			mainchart.chartOptions.explorer = {
				'axis': 'horizontal',
				'maxZoomOut': 1,
			};
			mainchart.last_updated = 0;
			
			if(!refreshChart(mainchart, pauseGraphs))
				pauseGraphs();
		}
		last_main_chart_play = p;
	}


	// ------------------------------------------------------------------------
	// Chart resizing

	function screenWidth() {
		return (($(window).width() * 0.95) - 40);
	}

	// calculate the proper width for the thumb charts
	function thumbWidth() {
		var cwidth = screenWidth();
		var items = Math.round(cwidth / TARGET_THUMB_GRAPH_WIDTH);
		if(items < 1) items = 1;

		if(items > 1 && (cwidth / items) < MINIMUM_THUMB_GRAPH_WIDTH) items--;

		return Math.round(cwidth / items) - 1;
	}

	function groupChartSizes() {
		var s = { width: screenWidth() / 2, height: ($(window).height() - 130) / 3 - 10};
		if(s.width < MINIMUM_THUMB_GRAPH_WIDTH) s.width = screenWidth();

		var count = 0;
		if(group_charts) $.each(group_charts, function(i, c) {
			if(c.enabled) count++;
		});

		if(count == 0) {
			s.width = TARGET_THUMB_GRAPH_WIDTH;
			s.height = TARGET_THUMB_GRAPH_HEIGHT;
		}
		if(count < 4) {
			s.width = screenWidth();
			s.height = ($(window).height() - 130) / count - 10;
		}
		else if(count == 4) {
			s.height = ($(window).height() - 130) / 2 - 10;
		}

		if(s.height < TARGET_THUMB_GRAPH_HEIGHT * 1.5)
			s.height = TARGET_THUMB_GRAPH_HEIGHT * 1.5;

		return s;
	}

	// resize all charts
	// if the thumb charts need resize in their width, reset them
	function resizeCharts() {
		var width = screenWidth();

		if(mainchart) {
			mainchart.chartOptions.width = width;
			mainchart.chartOptions.height = $(window).height() - 200;
			mainchart.last_updated = 0;
		}

		width = thumbWidth();
		$.each(mycharts, function(i, c) {
			if(c.enabled && c.chartOptions.width != width) {
				if(c.chart) c.chart.clearChart();
				c.chart = null;
				c.chartOptions.width = width;
				showChartIsLoading(c.div, c.chartOptions.width, c.chartOptions.height);
				c.last_updated = 0;
			}
		});

		if(group_charts) $.each(group_charts, function(i, c) {
			var sizes = groupChartSizes();

			if(c.enabled && (c.chartOptions.width != sizes.width || c.chartOptions.height != sizes.height)) {
				if(c.chart) c.chart.clearChart();
				c.chart = null;
				c.chartOptions.width = sizes.width;
				c.chartOptions.height = sizes.height;
				showChartIsLoading(c.div, c.chartOptions.width, c.chartOptions.height);
				c.last_updated = 0;
			}
		});

		playGraphs();
	}

	window.onresize = function(event) {
		resizeCharts();
	};


	// ------------------------------------------------------------------------
	// Core of the thread refreshing the charts

	var stop_refreshing = 1;
	var last_refresh = 0;
	function playGraphs() {
		if(!stop_refreshing) {
			// check if the thread died due to a javascript error
			var now = new Date().getTime();
			if((now - last_refresh) > 5000) {
				// it died!
				console.log('It seems the refresh thread died. Restarting it.');
				chartsRefresh();
			}
			return;
		}

		stop_refreshing = 0;
		$('.mainchart_play_button').button('play');
		chartsRefresh();
	}

	function pauseGraphs() {
		if(stop_refreshing) return;

		stop_refreshing = 1;
		$('.mainchart_play_button').button('pause');
	}

	// refresh the proper chart
	// this is an internal function.
	// never call it directly, or new javascript threads will be spawn
	var timeout;
	function chartsRefresh() {
		if(stop_refreshing) return;

		last_refresh = new Date().getTime();

		     if(mode == MODE_THUMBS)		thumbChartsRefresh();
		else if(mode == MODE_GROUP_THUMBS)  groupChartsRefresh();
		else if(mode == MODE_MAIN)   		mainChartRefresh();
		else                         		timeout = setTimeout(triggerRefresh, 500);
	}

	// callback for refreshing the charts later
	// this is an internal function.
	// never call it directly, or new javascript threads will be spawn
	function triggerRefresh() {
		// cleanup has to take place when the charts are not refreshed
		// since the refreshing thread is in this function, it means
		// nothing is being refreshed.
		cleanupCharts();

		     if(mode == MODE_THUMBS) 		timeout = setTimeout(chartsRefresh, 200);
		else if(mode == MODE_GROUP_THUMBS)	timeout = setTimeout(chartsRefresh, 200);
		else if(mode == MODE_MAIN)   		timeout = setTimeout(chartsRefresh, 200);
		else                         		timeout = setTimeout(triggerRefresh, 500);
	}

	// refresh the main chart
	// make sure we don't loose the refreshing thread
	function mainChartRefresh() {
		if(mode != MODE_MAIN || !mainchart) {
			triggerRefresh();
			return;
		}

		mainchart.points_to_show = Math.round(mainchart.entries / mainchart.group) - 1;

		if(mainchart.points_to_show * mainchart.group > MAINCHART_MAX_TIME_TO_SHOW)
			mainchart.points_to_show = MAINCHART_MAX_TIME_TO_SHOW / mainchart.group;

		if(!refreshChart(mainchart, triggerRefresh))
			triggerRefresh();
	}

	// refresh the thumb charts
	// make sure we don't loose the refreshing thread
	var last_thumb_updated = 0;
	function thumbChartsRefresh() {
		if(mycharts.length == 0 || mode != MODE_THUMBS) {
			triggerRefresh();
			return;
		}

		if(last_thumb_updated >= mycharts.length) last_thumb_updated = 0;

		// find a chart to refresh
		var orig = last_thumb_updated;
		var refreshed = false;

		last_thumb_updated++;
		if(last_thumb_updated >= mycharts.length) last_thumb_updated = 0;

		while(1) {
			refreshed = refreshChart(mycharts[last_thumb_updated], chartsRefresh);
			if(refreshed) break;

			last_thumb_updated++;
			if(last_thumb_updated >= mycharts.length) last_thumb_updated = 0;
			if(last_thumb_updated == orig) break;
		}

		// no chart refreshed
		if(!refreshed) triggerRefresh();
	}

	// refresh the group charts
	// make sure we don't loose the refreshing thread
	var last_group_updated = 0;
	function groupChartsRefresh() {
		if(!group_charts || group_charts.length == 0 || mode != MODE_GROUP_THUMBS) {
			triggerRefresh();
			return;
		}

		if(last_group_updated >= group_charts.length) last_group_updated = 0;

		// find a chart to refresh
		var orig = last_group_updated;
		var refreshed = false;

		last_group_updated++;
		if(last_group_updated >= group_charts.length) last_group_updated = 0;

		while(1) {
			refreshed = refreshChart(group_charts[last_group_updated], chartsRefresh);
			if(refreshed) break;

			last_group_updated++;
			if(last_group_updated >= group_charts.length) last_group_updated = 0;
			if(last_group_updated == orig) break;
		}

		// no chart refreshed
		if(!refreshed) triggerRefresh();
	}


	// ------------------------------------------------------------------------
	// switch the screen between views
	// these should be called only from initXXXX()

	// cleanup the previously shown charts
	function cleanupCharts() {
		if(mode != MODE_MAIN && mainchart) {
			if(mainchart.chart) {
				mainchart.chart.clearChart();
				mainchart.chart = null;
			}
			mainchart = null;
		}

		if(mode != MODE_GROUP_THUMBS && group_charts) {
			clearGroupGraphs();
		}

		// we never cleanup the thumb charts
	}

	function updateUI() {
		$('[data-toggle="tooltip"]').tooltip({'placement': 'top', 'container': 'body', 'html': true});

		$('[data-spy="scroll"]').each(function () {
			var $spy = $(this).scrollspy('refresh')
		})
	}

	var thumbsScrollPosition = null;
	function switchToMainGraph() {
		if(!mainchart) return;

		if(!group_charts) thumbsScrollPosition = window.pageYOffset;

		document.getElementById('maingraph_container').style.display = 'block';
		document.getElementById('thumbgraphs_container').style.display = 'none';
		document.getElementById('groupgraphs_container').style.display = 'none';

		document.getElementById("main_menu_div").innerHTML = "<ul class=\"nav navbar-nav\"><li><a href=\"javascript:switchToThumbGraphs();\">Back to Home</a></li><li class=\"active\"><a href=\"#\">" + mainchart.title + "</a></li></ul>";

		mode = MODE_MAIN;
		playGraphs();
		updateUI();
	}

	function switchToThumbGraphs() {
		document.getElementById('maingraph_container').style.display = 'none';
		document.getElementById('thumbgraphs_container').style.display = 'block';
		document.getElementById('groupgraphs_container').style.display = 'none';

		document.getElementById("main_menu_div").innerHTML = mainmenu;

		if(thumbsScrollPosition) window.scrollTo(0, thumbsScrollPosition);

		// switch mode
		mode = MODE_THUMBS;
		playGraphs();
		updateUI();
	}

	function switchToGroupGraphs() {
		if(!group_charts) return;

		if(!mainchart) thumbsScrollPosition = window.pageYOffset;

		document.getElementById('maingraph_container').style.display = 'none';
		document.getElementById('thumbgraphs_container').style.display = 'none';
		document.getElementById('groupgraphs_container').style.display = 'block';

		document.getElementById("main_menu_div").innerHTML = "<ul class=\"nav navbar-nav\"><li><a href=\"javascript:switchToThumbGraphs();\">Back to Home</a></li><li class=\"active\"><a href=\"#\">" + group_charts[0].group_tag + " charts</a></li></ul>";

		window.scrollTo(0, 0);

		mode = MODE_GROUP_THUMBS;
		playGraphs();
		updateUI();
	}


	// ------------------------------------------------------------------------
	// Group Charts

	var group_charts = null;
	function initGroupGraphs(group) {
		var count = 0;
		
		if(group_charts) clearGroupGraphs();
		group_charts = new Array();

		var groupbody = "";
		$.each(mycharts, function(i, c) {
			if(c.group_tag == group) {
				group_charts[count] = [];
				group_charts[count] = $.extend(true, {}, c);
				group_charts[count].div += "_group";
				group_charts[count].enabled = true;
				group_charts[count].chart = null;
				group_charts[count].last_updated = 0;
				count++;
			}
		});
		group_charts.sort(chartssort);

		var sizes = groupChartSizes();

		var groupbody = "";
		$.each(group_charts, function(i, c) {
			c.chartOptions.width = sizes.width;
			c.chartOptions.height = sizes.height;

			groupbody += "<div class=\"thumbgraph\" id=\"" + c.div + "_parent\"><table><tr><td><div class=\"thumbgraph\" id=\"" + c.div + "\">" + chartIsLoadingHTML(c.chartOptions.width, c.chartOptions.height) + "</div></td></tr><tr><td align=\"center\">" + thumbChartActions(i, c, 'nogroup') + "</td></tr></table></div>";
		});
		groupbody += "";

		document.getElementById("groupgraphs").innerHTML = groupbody;
		switchToGroupGraphs();
	}

	function clearGroupGraphs() {
		if(group_charts && group_charts.length) {
			$.each(group_charts, function(i, c) {
				if(c.chart) c.chart.clearChart();
				c.chart = null;
			});

			group_charts = null;
		}

		document.getElementById("groupgraphs").innerHTML = "";
	}


	// ------------------------------------------------------------------------
	// Global entry point
	// initialize the thumb charts

	// load the charts from the server
	// generate html for the thumbgraphs to support them
	function initCharts() {
		var width = thumbWidth();
		var height = TARGET_THUMB_GRAPH_HEIGHT;

		loadCharts(null, function(c) {
			mycharts = c;

			if(mycharts == null || mycharts.length == 0) {
				alert("Cannot load data from server.");
				return;
			}

			var thumbsContainer = document.getElementById("thumbgraphs");
			if(!thumbsContainer) {
				alert("Cannot find the thumbsContainer");
				return;
			}

			mycharts.sort(chartssort);

			document.getElementById('hostname_id').innerHTML = mycharts[0].hostname;
			document.title = mycharts[0].hostname;

			// create an array for grouping all same-type graphs together
			var categories = new Array();
			$.each(mycharts, function(i, c) {
				c.chartOptions.width = width;
				c.chartOptions.height = height;

				// calculate how many point to show for each chart
				c.points_to_show = Math.round(c.entries / c.group) - 1;

				// show max 10 mins of data
				if(c.points_to_show * c.group > THUMBS_MAX_TIME_TO_SHOW) c.points_to_show = THUMBS_MAX_TIME_TO_SHOW / c.group;

				if(c.enabled) {
					var j;
					var h = "<div class=\"thumbgraph\" id=\"" + c.div + "_parent\"><table><tr><td><div class=\"thumbgraph\" id=\"" + c.div + "\">" + chartIsLoadingHTML(c.chartOptions.width, c.chartOptions.height) + "</div></td></tr><tr><td align=\"center\">"
					+ thumbChartActions(i, c)
					+	"</td></tr></table></div>";

					// find the categories object for this type
					for(j = 0; j < categories.length ;j++) {
						if(categories[j].name == c.type) {
							categories[j].html += h;
							categories[j].count++;
							break;
						}
					}

					if(j == categories.length) {
						categories.push({name: c.type, title: c.category, description: '', priority: 0, count: 1, glyphicon: c.glyphicon, html: h});
					}
				}
			});

			$.each(categories, function(i, a) {
				     if(a.name == "system") a.priority = 1;
				else if(a.name == "net") a.priority = 2;
				else if(a.name == "tc") a.priority = 3;
				else if(a.name == "conntrack") a.priority = 4;
				else if(a.name == "ipvs") a.priority = 5;
				else if(a.name == "ipv4") a.priority = 6;
				else if(a.name == "cpu") a.priority = 7;
				else if(a.name == "mem") a.priority = 8;
				else if(a.name == "disk") a.priority = 9;
				else a.priority = 99;

				a.html = "<tr><td id=\"" + a.name + "\"><ol class=\"breadcrumb graphs\"><li class=\"active\"><span class=\"glyphicon " + a.glyphicon + "\"></span> &nbsp; <a id=\"" + a.name + "\" href=\"#" + a.name + "\"><b>" + a.title + "</b> " + a.description + " </a></li></ol></td></tr><tr><td><div class=\"thumbgraphs\">" + a.html + "</td></tr>";
			});

			function categoriessort(a, b) {
				if(a.priority < b.priority) return -1;
				return 1;
			}
			categories.sort(categoriessort);
			
			// combine all the htmls into one
			var allcategories = "<table width=\"100%\">";
			mainmenu = "<ul class=\"nav navbar-nav\"><li><a href=\"#\">Home</a></li>";
			$.each(categories, function(i, a) {
				allcategories += a.html;
				mainmenu += "<li><a href=\"#" + a.name + "\">" + a.title + "</a></li>";
			});
			allcategories += "</table>";
			mainmenu += "</ul>";

			thumbsContainer.innerHTML = allcategories;
			switchToThumbGraphs();
		});
	}

	</script>
</head>

<body role="document" data-spy="scroll" data-target="#main_menu_div">
    <nav id="mynav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main_menu_div">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="javascript:switchToThumbGraphs();" id="hostname_id">NetData</a>
        </div>
        <div class="collapse navbar-collapse" id="main_menu_div">
          <ul class="nav navbar-nav">
            <li><a href="#">Home</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container graphs" id="maingraph_container" style="display: none">
		<table>
			<tr><td>
		    	<div class="maingraph">
					<table>
						<tr><td>
						<div class="maingraph" id="maingraph"></div>
						</td></tr>
						<tr><td align="center">
							<div class="btn-group">
								<form id="mainchartform">
									<div class="btn-group btn-group" data-toggle="tooltip" title=" click <span class='glyphicon glyphicon-play'></span> to have the graph auto-refresh, or click <span class='glyphicon glyphicon-pause'></span> to pause the graph. When paused the graph can be zoomed and panned horizontally." >
										<button type="button" class="btn btn-primary mainchart_play_button" data-play-text="<span class='glyphicon glyphicon-pause'></span>" data-pause-text="<span class='glyphicon glyphicon-play'></span>" onClick="setMainChartPlay('toggle');">
											<span class="glyphicon glyphicon-pause"></span>
										</button>
									</div>
									<div class="btn-group btn-group" data-toggle="tooltip" title="use the maximum ( <span class='glyphicon glyphicon-signal'></span> ) or the average ( <span class='glyphicon glyphicon-align-justify'></span> ) value of grouped points" >
										<button type="button" class="btn btn-primary mainchart_avg_button" data-max-text="<span class='glyphicon glyphicon-signal'></span>" data-average-text="<span class='glyphicon glyphicon-align-justify'></span>" onClick="setMainChartGroupMethod('toggle');">
											<span class="glyphicon glyphicon-signal"></span>
										</button>
									</div>
<!--									<div class="btn-group btn-group" data-toggle="buttons">
										<label class="btn btn-primary" data-toggle="tooltip" title="show the MAX point among all points grouped">
											<input type="radio" name="groupmethod" id="groupmax" onChange="setMainChartGroupMethod('max');">
											<span class="glyphicon glyphicon-signal"></span>
										</label>
										<label class="btn btn-primary" data-toggle="tooltip" title="show the AVERAGE of all points grouped">
											<input type="radio" name="groupmethod" id="groupaverage" onChange="setMainChartGroupMethod('average');">
											<span class="glyphicon glyphicon-align-justify"></span>
										</label>
									</div>
-->									<div class="btn-group btn-group" data-toggle="buttons" >
										<label class="btn btn-primary" data-toggle="tooltip" title="do not group points, show the raw data">
											<input type="radio" name="group" id="group1" onChange="setMainChartGroup(1);">1
										</label>
										
										<label class="btn btn-primary" data-toggle="tooltip" title="group in half, show 1 every 2 points of data">
											<input type="radio" name="group" id="group2" onChange="setMainChartGroup(2);">2
										</label>

										<label class="btn btn-primary" data-toggle="tooltip" title="group every 5 points of data">
											<input type="radio" name="group" id="group5" onChange="setMainChartGroup(5);">5
										</label>
										<label class="btn btn-primary" data-toggle="tooltip" title="group every 10 points of data">
											<input type="radio" name="group" id="group10" onChange="setMainChartGroup(10);">10
										</label>
										<label class="btn btn-primary" data-toggle="tooltip" title="group every 15 points of data">
											<input type="radio" name="group" id="group15" onChange="setMainChartGroup(15);">15
										</label>
										<label class="btn btn-primary" data-toggle="tooltip" title="group every 20 points of data">
											<input type="radio" name="group" id="group20" onChange="setMainChartGroup(20);">20
										</label>
										<label class="btn btn-primary" data-toggle="tooltip" title="group every 30 points of data">
											<input type="radio" name="group" id="group30" onChange="setMainChartGroup(30);">30
										</label>
										<label class="btn btn-primary" data-toggle="tooltip" title="group every 45 points of data">
											<input type="radio" name="group" id="group45" onChange="setMainChartGroup(45);">45
										</label>
										<label class="btn btn-primary" data-toggle="tooltip" title="group every 60 points of data">
											<input type="radio" name="group" id="group60" onChange="setMainChartGroup(60);">60
										</label>
									</div>
									<div class="btn-group btn-group" data-toggle="tooltip" title="maximized ( <span class='glyphicon glyphicon-fullscreen'></span> ) or normal ( <span class='glyphicon glyphicon-resize-small'></span> ) view of the graph" >
										<button type="button" class="btn btn-primary mainchart_max_button" data-maximized-text="<span class='glyphicon glyphicon-resize-small'></span>" data-normal-text="<span class='glyphicon glyphicon-fullscreen'></span>" onClick="setMainChartMax('toggle');">
											<span class="glyphicon glyphicon-fullscreen"></span>
										</button>
									</div>
<!--									<div class="btn-group btn-group" data-toggle="buttons" >
										<label class="btn btn-primary" data-toggle="tooltip" title="NORMAL chart size">
											<input type="radio" name="chartmax" id="chartnormal" onChange="setMainChartMax('normal');">
											<span class="glyphicon glyphicon-resize-small"></span>
										</label>
										<label class="btn btn-primary" data-toggle="tooltip" title="MAXIMIZED chart size">
											<input type="radio" name="chartmax" id="chartmax" onChange="setMainChartMax('maximized');">
											<span class="glyphicon glyphicon-fullscreen"></span>
										</label>
									</div>
-->								</form>
							</div>
							</td></tr>
					</table>
		 	   </div><!-- /.maingraph -->
			</td></tr>
		</table>
	</div>

    <div class="container graphs" id="thumbgraphs_container">
    	<div class="allgraphs" id="thumbgraphs">
    		<table width="100%">
    			<tr><td id="splash" align="center" style="vertical-align:middle">
    				<h1>
    				Welcome to <b>NetData</b>!
    				<br/><br/>
    				<span class="glyphicon glyphicon-off"></span>
    				<br/><br/>
    				loading charts
    				<br/><br/>
    				<span class="label label-default">Please wait...</span>
    				</h1>
    			</td></tr>
    		</table>
    	</div>
	</div>

    <div class="container graphs" id="groupgraphs_container">
    	<div class="allgraphs" id="groupgraphs">
    	</div>
	</div>

	<script type='text/javascript'>
		$(document).ready(function(){
			document.getElementById('splash').height = $(window).height();

			$(document).on('click','.navbar-collapse.in',function(e) {
				if( $(e.target).is('a') ) {
					$(this).collapse('hide');
				}
			});
			
			$('body').scrollspy({ target: '#main_menu_div' })
		});

	</script>
</html>
